(window.webpackJsonp=window.webpackJsonp||[]).push([[101,39],{326:function(e,t,r){var content=r(329);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(121).default)("d45f686e",content,!0,{sourceMap:!1})},328:function(e,t,r){"use strict";r(326)},329:function(e,t,r){var n=r(120)(function(i){return i[1]});n.push([e.i,".payment_part a{color:#000;font-size:12px;font-weight:400;margin-right:10px;text-transform:capitalize;transition:all .4s ease-in-out}",""]),n.locals={},e.exports=n},330:function(e,t,r){"use strict";r.r(t);r(328);var n=r(33),component=Object(n.a)({},function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"links desktop_view"},[t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-3"}),e._v(" "),t("div",{staticClass:"col-7"},[t("div",{staticClass:"payment_part d-flex justify-content-left"},[t("nuxt-link",{staticClass:"a_link",class:{active:"/allbrands"===e.$route.path},attrs:{to:"/allbrands"}},[e._v("\n                            Shop By Brands\n                        ")]),e._v(" "),t("nuxt-link",{staticClass:"a_link",class:{active:"/allbrands"===e.$route.path},attrs:{to:"/allbrands"}},[e._v("\n                            All Products\n                        ")])],1)]),e._v(" "),t("div",{staticClass:"col-2"},[t("div",{staticClass:"payment_part d-flex justify-content-center"},[t("nuxt-link",{staticClass:"a_link",class:{active:"/track-orders"===e.$route.path},attrs:{to:"/track-orders"}},[e._v("\n                            Track Your Orders\n                        ")])],1)])])])])])},[],!1,null,null,null);t.default=component.exports},355:function(e,t,r){"use strict";e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},359:function(e,t,r){"use strict";var n=r(2),o=r(360).trim;n({target:"String",proto:!0,forced:r(361)("trim")},{trim:function(){return o(this)}})},360:function(e,t,r){"use strict";var n=r(4),o=r(22),c=r(14),l=r(355),d=n("".replace),m=RegExp("^["+l+"]+"),f=RegExp("(^|[^"+l+"])["+l+"]+$"),v=function(e){return function(t){var r=c(o(t));return 1&e&&(r=d(r,m,"")),2&e&&(r=d(r,f,"$1")),r}};e.exports={start:v(1),end:v(2),trim:v(3)}},361:function(e,t,r){"use strict";var n=r(95).PROPER,o=r(3),c=r(355);e.exports=function(e){return o(function(){return!!c[e]()||"​᠎"!=="​᠎"[e]()||n&&c[e].name!==e})}},429:function(e,t,r){var content=r(525);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(121).default)("1c7ca4d7",content,!0,{sourceMap:!1})},524:function(e,t,r){"use strict";r(429)},525:function(e,t,r){var n=r(120)(function(i){return i[1]});n.push([e.i,".chat-box[data-v-9b41c398]{border:1px solid #ccc;height:400px}.ok.chat-messages.scrollarea[data-v-9b41c398]{flex:1;overflow-y:auto}.message-container[data-v-9b41c398]{margin-bottom:10px}.sent .message[data-v-9b41c398]{background-color:#e0ffe0}.received .message[data-v-9b41c398]{background-color:#e0e0ff}.message-time[data-v-9b41c398]{display:block;font-size:10px}.chat-footer-menu[data-v-9b41c398]{border-top:1px solid #ccc;padding:10px}.message-input[data-v-9b41c398]{border:1px solid #ccc}.container[data-v-9b41c398]{margin:50px auto;max-width:600px;padding:0 20px}.message-input[data-v-9b41c398]{flex:1}.chat-box[data-v-9b41c398]{background:#f9f9f9;border-radius:10px;border-radius:0;box-shadow:0 4px 8px rgba(0,0,0,.1);display:flex;flex-direction:column;height:85vh;overflow:hidden}.chat-header[data-v-9b41c398]{background:linear-gradient(90deg,#122664,rgba(123,97,255,.141));padding:10px 15px}.username-input[data-v-9b41c398]{border:none;border-radius:5px;color:#333;font-size:16px;outline:none;padding:10px;width:100%}.scrollarea[data-v-9b41c398]{background:#fff;display:flex;flex-direction:column;flex-grow:1;overflow-y:auto;padding:20px}.message-container[data-v-9b41c398]{display:flex;margin:5px 0}.message-container.sent[data-v-9b41c398]{justify-content:flex-end}.message-container.received[data-v-9b41c398]{justify-content:flex-start}.message[data-v-9b41c398]{background:#333;border-radius:15px;color:#000;max-width:80%;padding:10px 15px;width:50%}.sent .message[data-v-9b41c398]{background:#fff;border-bottom-right-radius:0;box-shadow:0 0 10px rgba(0,0,0,.302);padding:3px 15px}.sent .message-text[data-v-9b41c398]{align-items:end;color:#000;display:flex;flex-direction:column;font-size:12px}.received .message[data-v-9b41c398]{background:#000;border-bottom-left-radius:0;box-shadow:0 0 10px rgba(0,0,0,.302);padding:5px 15px}.received .message-username[data-v-9b41c398]{margin-bottom:2px}.message-username[data-v-9b41c398]{color:green}.message-username[data-v-9b41c398],.received .message-username[data-v-9b41c398]{font-size:12px;font-weight:700;margin-bottom:5px}.received .message-username[data-v-9b41c398]{color:#ffc458}.message-text[data-v-9b41c398]{color:#474646;display:flex;flex-direction:column}.received .message-text[data-v-9b41c398]{color:#fff}.message-text small[data-v-9b41c398]{align-self:flex-end;color:#5c5a5a;font-size:10px}.message-input[data-v-9b41c398]{border:1px solid #ddd;border-radius:5px;font-size:16px;outline:none;padding:10px;transition:border-color .3s;width:100%}.message-input[data-v-9b41c398]:focus{border-color:#4a90e2}.chat-messages[data-v-9b41c398]{flex:1;overflow-y:auto;padding:10px}.message_box main[data-v-9b41c398]{margin-top:5px}.chat-form[data-v-9b41c398]{background:#f1f1f1;display:flex;gap:10px;padding:10px;position:fixed;width:100%!important}.message-input button[data-v-9b41c398]{background-color:#007bff;border:none;color:#fff;cursor:pointer;padding:5px 10px}.selected-item[data-v-9b41c398]{background-color:#f0f8ff;border-left:5px solid #007bff;font-weight:700}",""]),n.locals={},e.exports=n},645:function(e,t,r){"use strict";r.r(t);r(40);var n=r(6),o=(r(34),r(359),r(94),r(75),{data:function(){return{communitySlug:this.$route.query.slug,username:"jons",name:this.$route.query.name,seller_id:this.$route.query.seller_id,message:"",loading:!1,messages:[],userList:[],currentUser:{username:""},isAtBottom:!0,buyerId:null,selectedName:null,chatMessagesRef:null,pollingInterval:null,currentUserEmail:null,selectedUser:null,buyerName:null,buyerEmail:null,buyerInviteCode:null}},head:{title:"ChatBox"},mounted:function(){var e=this;this.getCurrentUser(),this.scrollToBottom(),this.getBuyersListForSeller(),this.afterSubmitResponse(),this.pollingInterval=setInterval(this.afterSubmitResponse,1e4),this.$nextTick(function(){e.chatMessagesRef=e.$refs.chatMessagesRef})},updated:function(){this.scrollToBottom()},beforeDestroy:function(){clearInterval(this.pollingInterval)},methods:{selectUser:function(e){this.message="",this.selectedUser=e,this.showBuyerMessages(e)},getCurrentUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,e.$axios.post("/auth/me").then(function(t){e.currentUserEmail=t.data.email,e.currentUser.username=t.data.email});case 1:case"end":return t.stop()}},t)}))()},scrollToDiv:function(){var e=this.$refs.targetDiv;e&&e.scrollIntoView({behavior:"smooth"})},showBuyerMessages:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark(function r(){var n,o,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,r.prev=1,n=e.user_id,t.selectedName=e.name,t.buyerId=e.user_id,t.buyerName=e.name,t.buyerEmail=e.username,t.buyerInviteCode=e.invite_code,r.next=2,t.$axios.get("/getSellerMessages/".concat(n));case 2:o=r.sent,t.messages=o.data,r.next=4;break;case 3:r.prev=3,c=r.catch(1),console.error("Error fetching messages:",c);case 4:return r.prev=4,t.loading=!1,r.finish(4);case 5:case"end":return r.stop()}},r,null,[[1,3,4,5]])}))()},fetchMessages:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,e.$axios.get("/getSellerMessages/".concat(e.seller_id));case 1:r=t.sent,e.messages=r.data,t.next=3;break;case 2:t.prev=2,n=t.catch(0),console.error("Error fetching messages:",n);case 3:case"end":return t.stop()}},t,null,[[0,2]])}))()},getBuyersListForSeller:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=1,e.$axios.get("/getBuyListForSeller");case 1:r=t.sent,e.userList=r.data,e.fetchMessages(),t.next=3;break;case 2:t.prev=2,n=t.catch(0),console.error("Error fetching messages:",n);case 3:return t.prev=3,e.loading=!1,t.finish(3);case 4:case"end":return t.stop()}},t,null,[[0,2,3,4]])}))()},onFileChange:function(e){console.log(e),console.log(this.$refs.files);var t=this.$refs.files.files[0];console.log(t)},submit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.message.trim()){t.next=1;break}return console.log("Message is empty, not sending."),t.abrupt("return");case 1:try{r=e.$refs.files.files[0],(n=new FormData).append("files",r),n.append("username",e.username),n.append("message",e.message),n.append("userId",e.buyerId),n.append("community_slug",e.name),e.$axios.post("/sellerSendMessages",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.$refs.files.value="",console.log(t.data)}).catch(function(e){console.error(e)}),e.message="",e.afterSubmitResponse(),e.$nextTick(function(){e.scrollToBottom()})}catch(e){console.error("Error sending message:",e)}case 2:case"end":return t.stop()}},t)}))()},afterSubmitResponse:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.buyerId,t.next=1,e.$axios.get("/getSellerMessages/".concat(r));case 1:n=t.sent,e.messages=n.data;case 2:case"end":return t.stop()}},t)}))()},scrollToBottom:function(){var e=this;this.$nextTick(function(){var t=e.$refs.chatContainer;t&&(t.scrollTop=t.scrollHeight)})}}}),c=(r(524),r(33)),component=Object(c.a)(o,function(){var e=this,t=e._self._c;return t("div",[t("title",[e._v("Chat Box")]),e._v(" "),t("LogoAndPayment"),e._v(" "),t("NavbarSecond"),e._v(" "),t("div",{staticClass:"wrapper-inline message_box"},[t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-2 mt-3"},[t("h3",[e._v("Messages")]),e._v(" "),t("ul",{staticClass:"list-group"},e._l(e.userList,function(r,n){return t("li",{key:n,staticClass:"list-group-item",class:{"selected-item":e.selectedUser===r}},[t("a",{staticStyle:{color:"black"},attrs:{href:"#"},on:{click:function(t){return e.selectUser(r)}}},[e._v("\n                "+e._s(r.name)+" [ "+e._s(r.email)+"]\n              ")])])}),0)]),e._v(" "),t("div",{staticClass:"col-md-8 mt-3"},[t("div",{staticClass:"conta"},[t("div",{staticClass:"chat-box"},[t("div",{staticClass:"chat-header"},[t("center",[t("u",{staticClass:"text-white"},[e._v("Seller Chatbox")]),e._v(" "),e.selectedName?t("span",[e._v(e._s(e.selectedName))]):e._e()]),e._v(" "),t("span",{staticClass:"d-none"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"username-input",attrs:{type:"text",placeholder:"Enter your username",readonly:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})])],1),e._v(" "),t("center",[e.loading?t("div",{staticClass:"loading-indicator"},[t("div",{staticClass:"loader-container"},[t("center",{staticClass:"loader-text"},[e._v("Loading...")]),e._v(" "),t("img",{attrs:{src:"/loader/loader.gif",alt:"Loader"}})],1)]):e._e()]),e._v(" "),t("section",{ref:"chatContainer",staticClass:"ok chat-messages scrollarea"},e._l(e.messages,function(r){return t("div",{key:r.id,class:{"message-container":!0,sent:r.username===e.currentUser.username,received:r.username!==e.currentUser.username}},[t("div",{staticClass:"message"},[t("div",{staticClass:"message-username"},[e._v(e._s(r.name))]),e._v(" "),t("div",{staticClass:"message-text"},[e._v("\n                      "+e._s(r.message)+"\n                      "),t("small",{staticClass:"message-time"},[e._v(e._s(r.created_at))])]),e._v(" "),r.files?t("div",{staticClass:"message-file"},[t("a",{attrs:{href:r.files,target:"_blank"}},[t("i",{staticClass:"fa fa-file",staticStyle:{"font-size":"24px"}})])]):e._e()])])}),0),e._v(" "),t("form",{staticClass:"chat-footer-menu",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"message-input",attrs:{placeholder:"Write a message"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-4"},[t("input",{ref:"files",staticClass:"form-control mb-2",attrs:{type:"file"},on:{change:e.onFileChange}})])]),e._v(" "),t("button",{staticClass:"btn w-100 btn btn-primary"},[e._v("Send")])])],1)])]),e._v(" "),t("div",{staticClass:"col-md-2 mt-3"},[t("center",[t("b",[t("u",[e._v("Profile")])]),t("br")]),e._v(" "),e.buyerEmail?t("span",[t("center",[t("img",{staticClass:"img-thumbnail mt-2",staticStyle:{height:"60px",width:"60px"},attrs:{src:"/user-100.png"}})]),e._v("\n            Name : "+e._s(e.buyerName)),t("br"),e._v("\n            Email : "+e._s(e.buyerEmail)),t("br"),e._v("\n            Invite Code : "+e._s(e.buyerInviteCode)),t("br")],1):e._e()],1)])])])],1)},[],!1,null,"9b41c398",null);t.default=component.exports;installComponents(component,{LogoAndPayment:r(330).default,NavbarSecond:r(331).default})}}]);